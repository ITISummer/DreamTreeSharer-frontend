# DreamTreeSharer-frontend

## Project setup
```
npm install
```

### Compiles and hot-reloads for development
```
npm run serve
```

### Compiles and minifies for production
```
npm run build
```

### Customize configuration
See [Configuration Reference](https://cli.vuejs.org/config/).

# å‰è¨€

DreamTreeSharer å‰ç«¯

æœ¬æ¥æ˜¯åœ¨çœ‹åˆ° Pinterest.com åæƒ³å€Ÿé‰´å…¶é¡µé¢å¸ƒå±€çš„ï¼Œç„¶åå½“æ—¶è‡ªå·±å¿ƒé‡Œæƒ³ç€å¯ä¸å¯ä»¥æ”¹è£…ä¸‹ï¼Œå¼„ä¸€ä¸ªâ€œæƒ³æ³•åˆ†äº«ç½‘ç«™â€ã€‚è€Œâ€œæƒ³æ³•åˆ†äº«â€è¿™ä¸ªæƒ³æ³•ä¹Ÿæ˜¯åœ¨çœ‹åˆ° v2ex åï¼Œæ„Ÿè§‰ v2ex ä¸Šé¢çš„ä¸€äº›åˆ›æ„æƒ³æ³•éƒ½è¿˜ä¸é”™ï¼æ‰€ä»¥æ­¤é¡¹ç›®åæ¥ç´¢æ€§å°±æ˜¯ç»“åˆ pinterest çš„ç½‘ç«™é¡µé¢+v2ex çš„æƒ³æ³•åˆ†äº«æ­å»ºçš„ã€‚

ç”±äºæ¯•è®¾è®ºæ–‡éœ€è¦ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¯¹è‡ªå·±æ­å»ºè¿‡ç¨‹çš„ä¸€ä¸ªè®°å½•ï¼Œæˆ‘åçŸ¥åè§‰çš„æ‰è§‰å¾—åº”è¯¥å¼„ä¸€ä¸ªæ­å»ºè¿‡ç¨‹è®°å½•ï¼Œè®°å½•å¦‚ä½•å¼•å…¥æ¨¡å—ï¼Œå¦‚ä½•å°†ç½‘ä¸Šçš„æ¨¡å—ç»™æ•´åˆåˆ°æ­¤é¡¹ç›®ä¸­å¹¶åŠ ä»¥æ”¹è¿›ä»¥é€‚åˆæœ¬é¡¹ç›®ã€‚è®°å½•çš„è¯å°±æŒ‰ç…§æ—¶é—´çº¿+ç®€å•æ¦‚è¿°æ¥è®°å½•å§ï¼

# å‚è€ƒå­¦ä¹ ç½‘ç«™

[ã€vue3.xã€‘2021æœ€æ–°ç‰ˆVueå…¨å¥—è¯¾ç¨‹#Webæ¡†æ¶å­¦ä¹ åŸºç¡€+Vueå…¨å®¶æ¡¶+Vueå®æˆ˜é¡¹ç›®ï¼ˆå·²å®Œç»“ï¼‰](https://www.bilibili.com/video/BV1Pz4y1S7Uv)

[å°šç¡…è°·Vueæ ¸å¿ƒæŠ€æœ¯å®æˆ˜æ•™ç¨‹å…¨å¥—å®Œæ•´ç‰ˆ(vue.jsåˆå­¦è€…å¿«é€Ÿå…¥é—¨åˆ°ç²¾é€š)](https://www.bilibili.com/video/BV1Wp411d7Ur)

[ã€æç‚æ¢ã€‘ã€Vue.js Element UI / å‰ç«¯UI / UIç»„ä»¶åº“ã€‘ã€åå¤©æŠ€èƒ½è¯¾å ‚ã€‘](https://www.bilibili.com/video/BV1U54y127GB)

[å…¨å¥—å®Œæ•´ç‰ˆã€‘2021æœ€æ–°SpringBoot+Vueå‰åç«¯åˆ†ç¦»é¡¹ç›®å®æˆ˜-åœ¨çº¿æ™ºèƒ½åŠå…¬ç³»ç»Ÿï¼Œå‰åç«¯åˆ†ç¦»é¡¹ç›®](https://www.bilibili.com/video/BV1ar4y1K7qx)

# å‰ç«¯è®¾è®¡

## å‰ç«¯ç¯å¢ƒæ­å»º

### å®‰è£… node.js

https://nodejs.org/en/download/

[å®‰è£…ä¸å¸è½½æ•™ç¨‹ - Windowsä¸‹å®Œå…¨å¸è½½node.jså¹¶å®‰è£…node.jsçš„å¤šç‰ˆæœ¬ç®¡ç†å·¥å…·nvm-windows](https://blog.csdn.net/lewky_liu/article/details/87959839)

[nvm-windows github åœ°å€](https://github.com/coreybutler/nvm-windows)

### è§£å†³ npm ä¸‹è½½æ…¢çš„é—®é¢˜

```shell
# ä½¿ç”¨æ­¤å‘½ä»¤
npm install cnpm -g

# æˆ–ä½¿ç”¨å¦‚ä¸‹è¯­å¥è§£å†³ npm é€Ÿåº¦æ…¢çš„é—®é¢˜ï¼ˆå»ºè®®ï¼‰
npm install --registry=https://registry.npm.taobao.org/
```

### å®‰è£… npm ç®¡ç†å™¨ nrm

```shell
npm install nrm -g

# ä½¿ç”¨ nrm ls æŸ¥çœ‹å·²å®‰è£…çš„ npm åŒ…
nrm ls

# ä½¿ç”¨ nrm use [é•œåƒå]å‘½ä»¤æ¥ä½¿ç”¨é•œåƒ
nrm use taobao
```

### ä½¿ç”¨ nrm ls æŠ¥é”™

[nrmæŠ¥é”™ [ERR_INVALID_ARG_TYPE] è§£å†³æ–¹æ³•]:(https://blog.csdn.net/S_aitama/article/details/113706339)



### å®‰è£… vue/cli

```shell
npm install -g @vue/cli

# å®‰è£…å®Œåæ£€æŸ¥æ˜¯å¦æˆåŠŸ
vue --version
```

### å¯åŠ¨åˆ›å»ºå¥½çš„ vue é¡¹ç›®

```shell
# è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ä¸‹
npm run serve
```



## é¡¹ç›®ç»“æ„è¯´æ˜

<img src="C:\Users\LCX\AppData\Roaming\Typora\typora-user-images\image-20210331165926659.png" alt="image-20210331165926659" style="zoom:80%;" />

node_modules: é¡¹ç›®ä½¿ç”¨åˆ°çš„ä¸€äº›ä¾èµ–

public: å¼€å‘æ—¶åŸºæœ¬ç”¨ä¸åˆ°ï¼Œå› ä¸º vue åŸºæœ¬æ˜¯ç»„ä»¶å¼€å‘ï¼Œé¡µé¢éƒ½æ˜¯åŠ¨æ€ç”Ÿæˆçš„

src: é¡¹ç›®æºç 

src-assets: ä¸“é—¨ç”¨äºæ”¾ä¸€äº›èµ„æº

src-components: é¡¹ç›®ç»„ä»¶

src-router: è·¯ç”±ç›®å½•

src-views: é¡µé¢ç›®å½•

app.vue: 

main.js: é¡¹ç›®å…¥å£

bable.config.js: æ‰“åŒ…æ—¶ï¼Œå°† ES6 è¯­æ³•è½¬æ¢ä¸º ES5 è¯­æ³•

package-lock.json: 

package.json:  é¡¹ç›®é…ç½®æ–‡ä»¶

README.md: é¡¹ç›®è¯´æ˜

# 2021å¹´4æœˆ1æ—¥-2021å¹´4æœˆ8æ—¥ - ç¼–å†™ java åç«¯

[åç«¯é¡¹ç›®åœ°å€](https://github.com/ITISummer/DreamTreeSharer)

# 2021å¹´4æœˆ11æ—¥

è®°å½• vue é¡¹ç›®æ­å»º

[vue-clié¡¹ç›®ç»“æ„è¯¦è§£](https://juejin.cn/post/6844903540213678087#heading-4)

æˆ‘è§‰å¾—ç†Ÿæ‚‰ä¸‹ vue-cli æ­å»ºçš„é¡¹ç›®ç»“æ„è¿˜è›®å¥½çš„ï¼Œæˆ‘ä¸€å¼€å§‹å°±æ˜¯çœ‹åˆ°é‚£ä¹ˆå¤šæ–‡ä»¶ï¼Œæˆ‘éƒ½æä¸æ¸…é‚£äº›æ–‡ä»¶æ˜¯æœ‰å•¥ä½œç”¨ï¼Œå±äºå“ªäº›æ¨¡å—ï¼Œäºæ˜¯ä¸“é—¨æ‰¾äº†ä¸€ç¯‡æ–‡ç« æ¥ç†Ÿæ‚‰ä¸‹ä½¿ç”¨ vue-cli æ­å»ºçš„é¡¹ç›®çš„é¡¹ç›®ç»“æ„åŠå„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„ä½œç”¨ï¼Œç†Ÿæ‚‰åå°±æ„Ÿè§‰ vue-cli çš„ä½œç”¨å°±ç±»ä¼¼ spring initializer å¿«é€Ÿæ­å»º springboot é¡¹ç›®çš„ä½œç”¨ä¸€æ ·å§ï¼

# 2021å¹´4æœˆ12æ—¥ - å®ç°ç™»å½•ä¸æ³¨å†Œé¡µé¢

[å…¨å¥—å®Œæ•´ç‰ˆã€‘2021æœ€æ–°SpringBoot+Vueå‰åç«¯åˆ†ç¦»é¡¹ç›®å®æˆ˜-åœ¨çº¿æ™ºèƒ½åŠå…¬ç³»ç»Ÿï¼Œå‰åç«¯åˆ†ç¦»é¡¹ç›®](https://www.bilibili.com/video/BV1ar4y1K7qx)

åœ¨å®ç°ç™»å½•ä¸æ³¨å†Œé¡µé¢è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨åˆ°äº† vue.js çš„å‰ç«¯æ¡Œé¢ ui åº“ [element-ui](https://element.eleme.io/) ï¼Œç™»å½•å’Œæ³¨å†Œé¡µé¢ä½¿ç”¨äº†å¤§é‡ ele-ui çš„ç»„ä»¶ä»¥åŠè¡¨å•éªŒè¯

[vueè¡¨å•éªŒè¯åº“async-validatorçš„ä½¿ç”¨ elementUi + form](https://blog.csdn.net/QingWaXieZi/article/details/82950725)



# 2021å¹´4æœˆ15æ—¥ - å¼•å…¥ç€‘å¸ƒæµå¸ƒå±€ä½œä¸ºç”¨æˆ·ç™»å½•é¦–é¡µ

æˆ‘æ„Ÿè§‰ç€‘å¸ƒæµå¸ƒå±€æ¯”è¾ƒå¥½çœ‹ã€‚é™¤äº†å¥½çœ‹ï¼Œæˆ‘è§‰å¾—æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥æ˜¯ç‹¬ç«‹å’Œé‡å¤çš„ï¼Œè¿™æ ·å¯¹äºæ•°æ®çš„å°è£…ä¹Ÿä¼šæ¯”è¾ƒç®€å•ï¼è¿˜æœ‰å…¶ä¸åŒçš„å‡ºç°æ–¹å¼ï¼šæ·¡å…¥æ·¡å‡ºå•¥çš„æ•ˆæœä¹Ÿæ¯”è¾ƒå¥½çœ‹ï¼

[Vue<ç€‘å¸ƒæµåŠ è½½æ•ˆæœ>](https://www.jianshu.com/p/97b89597ab5c)

[æœ¬é¡¹ç›®ä½¿ç”¨çš„ç€‘å¸ƒæµæ’ä»¶ vue-waterfall-plugin - github åœ°å€](https://github.com/heikaimu/vue-waterfall-plugin)

ä½¿ç”¨æ­¤æ’ä»¶å‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œå°±æ˜¯å§‹ç»ˆæ˜¯è‡ªåŠ¨å»¶æ—¶åŠ è½½ï¼Œè€Œä¸æ˜¯ç”¨æˆ·æ»‘åŠ¨æ»‘å—åˆ°äº†åº•éƒ¨åè§¦ç¢°åŠ è½½äº‹ä»¶ï¼Œè™½ç„¶é¡¹ç›®ä¸­æœ‰å®ç°æ­¤åŠŸèƒ½ï¼Œä½†æ˜¯å°±æ˜¯æ— æ•ˆï¼Œä½¿ç”¨çš„åŠŸèƒ½æ˜¯ [element-ui çš„ v-infinite-scorll å±æ€§](https://element.eleme.cn/#/zh-CN/component/infiniteScroll) - **ç›®å‰è¿˜æ²¡è§£å†³**

# 2021å¹´4æœˆ16æ—¥ - å¼•å…¥è¯„è®ºæ¨¡å—+å›¾ç‰‡ä¸Šä¼ 

## è¯„è®ºæ¨¡å—

ç›®å‰åªæ˜¯ç®€å•å¼•å…¥äº†è¯„è®ºæ¨¡å—ï¼Œè¿˜æ²¡åš ui çš„ä¼˜åŒ–ä»¥åŠåå°æ•°æ®è·å–å•¥çš„ï¼Œåå°ä¹Ÿè¿˜æ²¡å†™å¥½ï¼ˆå“­/(ã„’oã„’)/~~ï¼‰

[æœ¬é¡¹ç›®ä½¿ç”¨çš„è¯„è®ºæ¨¡å—-vue + element-ui + scss ä»¿ç®€ä¹¦è¯„è®ºæ¨¡å—](https://juejin.cn/post/6844903635063668744)

[å¦å¤–å¯å‚è€ƒ-åˆ©ç”¨Vue+ElementUiå®ç°è¯„è®ºåŠŸèƒ½-ä»¿æ˜é‡‘](https://blog.csdn.net/zLanaDelRey/article/details/100997792)

## å›¾ç‰‡ä¸Šä¼ æ¨¡å—

[Element el-uploadä¸Šä¼ ç»„ä»¶è¯¦è§£](https://segmentfault.com/a/1190000013796215)

[ElementUIçš„Uploadä¸Šä¼ ï¼Œé…åˆä¸ƒç‰›äº‘å‚¨å­˜å›¾ç‰‡](https://segmentfault.com/a/1190000016309473)

**æ ¹æ®ä»¥ä¸Šæ•™ç¨‹ï¼Œè¿è¡Œä»£ç åæŠ¥å¦‚ä¸‹é”™**

```js
vue.runtime.esm.js?2b0e:619 [Vue warn]: Error in created hook: "TypeError: Cannot read property 'post' of undefined"
found in
---> <Upload> at src/views/Upload/Upload.vue
       <App> at src/App.vue
         <Root>
         
TypeError: Cannot read property 'post' of undefined
    at VueComponent.getQiniuToken (webpack-internal:///./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/Upload/Upload.vue?vue&type=script&lang=js&:62)
    at VueComponent.created (webpack-internal:///./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/Upload/Upload.vue?vue&type=script&lang=js&:56)
    at invokeWithErrorHandling (webpack-internal:///./node_modules/vue/dist/vue.runtime.esm.js:1853)
    at callHook (webpack-internal:///./node_modules/vue/dist/vue.runtime.esm.js:4213)
    at VueComponent.Vue._init (webpack-internal:///./node_modules/vue/dist/vue.runtime.esm.js:4998)
    at new VueComponent (webpack-internal:///./node_modules/vue/dist/vue.runtime.esm.js:5144)
    at createComponentInstanceForVnode (webpack-internal:///./node_modules/vue/dist/vue.runtime.esm.js:3280)
    at init (webpack-internal:///./node_modules/vue/dist/vue.runtime.esm.js:3111)
    at merged (webpack-internal:///./node_modules/vue/dist/vue.runtime.esm.js:3298)
    at createComponent (webpack-internal:///./node_modules/vue/dist/vue.runtime.esm.js:5968)
    
upload-z1.qiniup.com/:1 Failed to load resource: the server responded with a status of 400 (Bad Request)
```

æŸ¥çœ‹å“åº”å¤´åå‘ç°â€œæœªæŒ‡å®š tokenâ€

<img src="C:\Users\LCX\AppData\Roaming\Typora\typora-user-images\image-20210416144801416.png" alt="elemen-ui ä¸Šä¼ ä¸ƒç‰›äº‘æŠ¥é”™" style="zoom:80%;" />

[ä¸ƒç‰›äº‘ä¸Šä¼ ä¸‹è½½æ“ä½œæŒ‡å—](https://developer.qiniu.com/kodo/kb/1336/upload-download-instructions)

æŸ¥è¯¢æ­¤æ–‡ç« å‘ç°ä¸ƒç‰›äº‘å¯¹è±¡å­˜å‚¨ä¸Šä¼ æ‰€éœ€çš„ token æ˜¯æ ¹æ® bucket, access key, secret key å’Œ keyï¼ˆæ–‡ä»¶åï¼‰æ¥ç”Ÿæˆçš„

æˆåŠŸè®¾ç½®å¥½ token åï¼Œå¼€å§‹è¯·æ±‚ï¼Œå‡ºç°å¦‚ä¸‹é”™è¯¯

`Proxy error: Could not proxy request /qrne6et6u.hn-bkt.clouddn.com/test.jpg from localhost:8080 to http://localhost:8081/ (ECONNREFUSED).`

æˆ‘æƒ³è¿™åº”è¯¥æ˜¯è·¨åŸŸçš„é—®é¢˜

<img src="C:\Users\LCX\AppData\Roaming\Typora\typora-user-images\image-20210416193629667.png" alt="image-20210416193629667" style="zoom:80%;" />

ç”±äºæˆ‘åªè®¾ç½®äº†æœ¬åœ°åå°è·¨åŸŸï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ï¼Œäºæ˜¯æˆ‘æƒ³æ˜¯ä¸æ˜¯èƒ½è®¾ç½®å¤šä¸ªè·¨åŸŸï¼Œåæ¥æˆ‘æŸ¥è¯¢åˆ°äº†ï¼Œæ˜¯å¯ä»¥è®¾ç½®å¤šä¸ªè·¨åŸŸçš„ï¼š [webpackå¼€å‘é…ç½®APIä»£ç†è§£å†³è·¨åŸŸé—®é¢˜-devServer](https://segmentfault.com/a/1190000016199721)ï¼Œæ·»åŠ ä¸€ä¸ªè·¨åŸŸåï¼Œé—®é¢˜ä¾¿è§£å†³äº†ï¼

```js
proxyObj['/upload-api'] = {
    // websocket
    ws: false,
    // ç›®æ ‡åœ°å€
    target: 'http://upload-z2.qiniup.com',
    // å‘é€è¯·æ±‚å¤´ host ä¼šè¢«è®¾ç½® target
    changeOrigin: true,
    // é‡å†™è¯·æ±‚åœ°å€
    pathRewrite: {
        '^/upload-api': ''
    }
}
```

<img src="C:\Users\LCX\AppData\Roaming\Typora\typora-user-images\image-20210416210112427.png" alt="image-20210416210112427" style="zoom:80%;" />

åœ¨ç»è¿‡ä¸€ç•ªä»”ç»†ç ”ç©¶åå‘ç°éœ€è¦åŠ  http æˆ–è€… https åè®®å¤´éƒ¨ï¼Œäºæ˜¯è¯·æ±‚åœ°å€å˜ä¸ºäº† `http://qrne6et6u.hn-bkt.clouddn.com/test.jpg` è¿™æ ·å°±å¯ä»¥æ­£ç¡®è®¿é—®äº†

# 2021å¹´4æœˆ17æ—¥ - å¤„ç†å›¾ç‰‡ä¸Šä¼ æ—¶å‘åå°åŠ¨æ€è·å– token

å‰ç«¯éœ€è¦åœ¨æ ¡éªŒå®Œç”¨æˆ·æäº¤çš„å›¾ç‰‡æ ¼å¼ï¼ˆåç¼€ï¼Œå¤§å°ï¼‰åå¾€åå°æäº¤å›¾ç‰‡å(key)ä»¥æ–¹ä¾¿åç«¯æ ¹æ® key æ¥ç”Ÿæˆå›¾ç‰‡ä¸Šä¼  tokenã€‚æœŸé—´é‡åˆ°ä¸€ä¸ªé—®é¢˜æ˜¯å‰ç«¯ä½¿ç”¨ `:before-upload="beforeUpload"` é’©å­å‡½æ•°æ¥æ ¡éªŒå®Œå›¾ç‰‡æ ¼å¼åï¼ŒæŒ‰ç†æƒ³æƒ…å†µï¼Œè¿™æ—¶å€™åº”è¯¥å¼€å§‹æ ¹æ® key æ¥å‘åå°é€šè¿‡ å‘é€ ajax è¯·æ±‚è·å¾—åå°ç”Ÿæˆçš„ tokenã€‚ä½†æ˜¯ç”±äºæ˜¯å¼‚æ­¥è¯·æ±‚ï¼Œå‰ç«¯åœ¨æ ¡éªŒå®Œå›¾ç‰‡æ ¼å¼åå°±ç›´æ¥æäº¤åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œè¿™æ—¶å€™åå°åŠ¨æ€ç”Ÿæˆçš„ token çš„è·å¾—å§‹ç»ˆæ˜¯è¦æ…¢äºå‰å°å‘è¿œç¨‹æœåŠ¡å™¨ï¼ˆä¸ƒç‰›äº‘ï¼‰æäº¤ã€‚æ‰€ä»¥æ¯æ¬¡æäº¤ç»™è¿œç¨‹æœåŠ¡å™¨æ—¶ï¼Œtokenæ€»æ˜¯ä¸º "" ã€‚åœ¨ç»è¿‡ä¸€ç•ªæŠ˜è…¾ï¼ˆæŸ¥è¯¢\<el-upload> æ ‡ç­¾ç›¸å…³å±æ€§ä¸é’©å­å‡½æ•°ï¼‰æ— æœåï¼Œæˆ‘è„‘å­é‡Œè¿™æ—¶å€™æ€»æ˜¯æµ®ç° async ä¸ awaitï¼Œæˆ‘åœ¨å‰æœŸè·Ÿç€å­¦ä¹ çš„æ—¶å€™ï¼Œæœ‰è§è¿‡è¿™ä¸¤ä¸ªå…³é”®è¯çš„ä½¿ç”¨ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰å¾ˆæ·±çš„å°è±¡ä¹Ÿæ²¡æœ‰å¾ˆå¥½çš„ç†è§£ã€‚æ‰€ä»¥åœ¨é‡åˆ°ä»¥ä¸Šæåˆ°çš„é—®é¢˜åï¼Œæˆ‘ä¸€ç›´æ²¡ç¬¬ä¸€æ—¶é—´ååº”è¿‡æ¥ã€‚åœ¨é‡åˆ°ä»¥ä¸Šé—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘å°±åœ¨æƒ³ï¼Œæ˜¯ä¸æ˜¯æœ‰ä¸€ç§æ‰‹æ®µï¼Œèƒ½å¤Ÿè®© \<el-uplaod> è¿›è¡Œå›¾ç‰‡æ ¼å¼éªŒè¯å®Œåå…ˆç­‰å¾… getQiniuToken() å¼‚æ­¥è·å–åˆ°åå°ç”Ÿæˆçš„ token åå†æ‹¿ç€ key ä¸ token å‘è¿œç¨‹æœåŠ¡å™¨è¿›è¡Œæäº¤ï¼ç»“åˆåˆšæ‰çš„æƒ³æ³•ä¸è„‘å­é‡Œæµ®ç°çš„ async ä¸ awaitï¼Œæˆ‘å°è¯•æ¨¡ä»¿å‰é¢å­¦ä¹ çš„ç”¨æ³•ï¼Œç»™æœ¬é¡¹ç›®ä¸­çš„ç›¸å…³æ–¹æ³•ç»™åŠ ä¸Š async ä¸ await åï¼Œç„¶åå°±æˆåŠŸäº†ï¼å¼€å¿ƒï¼ˆo(*ï¿£â–½ï¿£*)ãƒ–ï¼‰ï¼ï¼ï¼ 

å…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```js
  methods: {
    /**
     * åˆ›å»ºå‰ä»åå°è·å–è®¿é—®ä¸ƒç‰›äº‘çš„ token - (key(æ–‡ä»¶å) bucket, AccessKey, SecretKey)
     */
    getQiniuToken: async function(key) {
      const _this = this;
     await this.getRequest(`/qiniu/uploadToken/${key}`)
          .then(function(res) {
            if (res.statusCode === 200) {
              _this.qiniuData.token = res.object;
            } else {
              _this.$message({message: res.message, duration: 2000, type: "warning"});
            }
          });
    },
    /**
     * å›¾ç‰‡ä¸Šä¼ å‰çš„æ ¼å¼æ ¡éªŒ
     * @param file
     * @returns {boolean}
     */
    beforeUpload: async function(file) {
      this.qiniuData.key = file.name;
      const isJPG = file.type === "image/jpeg";
      const isPNG = file.type === "image/png";
      const isLt2M = file.size / 1024 / 1024 < 2;
      if (!isJPG && !isPNG) {
        this.$message.error("å›¾ç‰‡åªèƒ½æ˜¯ JPG/PNG æ ¼å¼!");
        return false;
      }
      if (!isLt2M) {
        this.$message.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 2MB!");
        return false;
      }
     await this.getQiniuToken(this.qiniuData.key)
    },
```

## å…³äº vue ç»„ä»¶ä¸­çš„ \<style scoped> ä¸ \<style module> ä½¿ç”¨çš„ç†è§£

å‡ºç°çš„é—®é¢˜æ˜¯ï¼Œå½“æˆ‘åœ¨ Upload.vue å®šä¹‰ img{width: 350px; height: 350px }æ—¶ï¼Œä¼šå½±å“ Comments.vue ä¸­è¯„è®ºè€…å¤´åƒå¤§å°çš„å½±å“ï¼ŒåŠ äº† scoped å°±æ²¡å½±å“äº†ï¼Œä½†æ˜¯è²Œä¼¼åŠ äº† scoped å Upload.vue ä¸­çš„æ ·å¼åˆä¼šæœ‰å˜åŒ–ï¼Œæˆ‘å°è¯•ç»™ç»™æ‰€æœ‰ vue ç»„ä»¶çš„ style æ ‡ç­¾ä¸­éƒ½åŠ ä¸Š scoped å±æ€§ï¼Œä½†æ˜¯æœ¬æ¥æ²¡åŠ  scopedï¼Œæ ·å¼æ˜¾ç¤ºæ•ˆæœå°±å¾ˆå¥½äº†ï¼ŒåŠ äº†ååè€Œä¸å¥½äº†ï¼Œæ•´ä¸ªæ ·å¼çš„æ§åˆ¶æ„Ÿè§‰æ•´ä½“ä¸Šå¾ˆä¹±ï¼Œæˆ‘åœ¨æœå¯»åï¼Œå‘ç°åŠ  module å±æ€§å¯ä»¥è¾¾åˆ°ä¸ scoped åŒæ ·çš„æ•ˆæœï¼Œä¸”è²Œä¼¼æ¯” scoped æ›´å¥½ä¸€ç‚¹ï¼Œä½†æ˜¯å½“æˆ‘å°è¯•æŠŠåŸæ¥çš„ scoped å±æ€§æ¢æˆ module å±æ€§æ—¶ï¼Œæ¯ä¸ªç»„ä»¶çš„æ ·å¼æ˜¾ç¤ºåˆåƒå¥‡ç™¾æ€ªäº†ã€‚å“ï¼ ğŸ˜”

**å‚è€ƒæ–‡æ¡£**

[æ˜é‡‘ï¼š Vue: scoped æ ·å¼ä¸ CSS Module å¯¹æ¯”](https://juejin.cn/post/6844903673517211655)

[segment: vueçš„scopedå’Œmoduleçš„åŒºåˆ«](https://segmentfault.com/a/1190000021084387)

[ç®€ä¹¦ï¼šVueä¸­å¯¹æ¯”scoped csså’Œcss moduleçš„åŒºåˆ«](https://www.jianshu.com/p/255a42397db5)

### \<style scoped>

**ä»¥ä¸‹å†…å®¹å‚è€ƒ** [ç®€ä¹¦ï¼šVueä¸­å¯¹æ¯”scoped csså’Œcss moduleçš„åŒºåˆ«](https://www.jianshu.com/p/255a42397db5)

ä¸ºç±»åæ·»åŠ ä¸€ä¸ªhashæ ‡è¯†å±æ€§ã€‚æ— æ³•å®Œå…¨é¿å¼€cssæƒé‡å’Œç±»åé‡å¤çš„é—®é¢˜ã€‚

```html
<style scoped>
h1 {
 color: #f00;
}
</style>
```

```html
//ç¼–è¯‘ç»“æœå¦‚ä¸‹
h1[data-v-4c3b6c1c] {
 color: #f00;
}
```

ç¼ºç‚¹

- å¦‚æœç”¨æˆ·åœ¨åˆ«å¤„å®šä¹‰äº†ç›¸åŒçš„ç±»åï¼Œä¹Ÿè®¸è¿˜æ˜¯ä¼šå½±å“åˆ°ç»„ä»¶çš„æ ·å¼ã€‚
- æ ¹æ®cssæ ·å¼ä¼˜å…ˆçº§çš„ç‰¹æ€§ï¼Œscopedè¿™ç§å¤„ç†ä¼šé€ æˆæ¯ä¸ªæ ·å¼çš„æƒé‡åŠ é‡,å¼•ç”¨ ä½¿ç”¨äº†scopedçš„ç»„ä»¶ ä½œä¸ºå­ç»„ä»¶ï¼Œä¿®æ”¹å­ç»„ä»¶çš„æ ·å¼å˜å¾—å¾ˆéš¾ï¼Œå¯èƒ½è¿«ä¸å¾—å·²åªèƒ½ç”¨ï¼important
- **scopedä¼šä½¿ æ ‡ç­¾é€‰æ‹©å™¨ æ¸²æŸ“å˜æ…¢å¾ˆå¤šå€**ï¼Œç”¨æ ‡ç­¾é€‰æ‹©å™¨æ—¶scopedä¼šä¸¥é‡é™ä½æ€§èƒ½ï¼Œè€Œä½¿ç”¨classæˆ–idåˆ™ä¸ä¼š

**ä»¥ä¸‹å†…å®¹å‚è€ƒ** [segmentï¼švueçš„scopedå’Œmoduleçš„åŒºåˆ«](https://segmentfault.com/a/1190000021084387)

åœ¨scopedè§„å®šåŒºåŸŸå†…çš„æ ·å¼ã€‚æ¸²æŸ“åç»™å…ƒç´ åŠ ä¸Šå±æ€§ï¼Œå¹¶å°†é€‰æ‹©å™¨å˜æˆå±æ€§é€‰æ‹©å™¨ ã€‚è¿™æ ·å°±é™å®šäº†èŒƒå›´ã€‚é˜²æ­¢å½¢æˆå…¨å±€æ ·å¼ã€‚

2. ç¼ºç‚¹

æ— æ³•ä¿®æ”¹å­ç»„ä»¶ã€ç¬¬ä¸‰æ–¹ç»„ä»¶ã€ v-html åˆ›å»ºçš„ DOM ã€çš„æ ·å¼ï¼Œ

3. è§£å†³æ–¹æ¡ˆ

1),é€šè¿‡ç©¿é€scopedï¼Œä½¿ç”¨æ·±åº¦é€‰æ‹©å™¨ï¼Œä¾‹å¦‚'>>>'ã€‚
2),å¦å¤–ç”¨ä¸€ä¸ªæ™®é€šä¸å«scopedçš„styleæ ‡ç­¾ã€‚åœ¨é‡Œé¢ä¹¦å†™æ ·å¼ã€‚

4. æ€»ç»“

ä¸Šé¢ä¸ç®¡æ˜¯é‚£ç§æ–¹å¼éƒ½æ˜¯è¿èƒŒscopedçš„åŸåˆ™ã€‚éƒ½ä¼šå½¢æˆå…¨å±€æ ·å¼ã€‚æ‰€ä»¥ä½¿ç”¨scopedçš„ä¸€èˆ¬æ˜¯ä¸­å°å‹é¡¹ç›®ã€‚



### \<style module>

ä»¥ä¸‹å†…å®¹å‚è€ƒ [æ˜é‡‘ï¼š Vue: scoped æ ·å¼ä¸ CSS Module å¯¹æ¯”](https://juejin.cn/post/6844903673517211655)

ä¸ºæ‰€æœ‰ç±»åé‡æ–°ç”Ÿæˆç±»åï¼Œç”Ÿæˆæ–¹å¼ä¸ºç±»ä¼¼ `æ‰€åœ¨ç»„ä»¶å_åŸç±»å_å“ˆå¸Œå€¼` ä¾‹å¦‚ï¼š

```vue
<style>
  .BasePanel__d17eko1 {
    /* some styles */
  }
  .ComponentName__pricing-panel__a81Kj {
    width: 300px;
    margin-bottom: 30px;
  }
</style>

<div class="BasePanel__d17eko1 ComponentName__pricing-panel__a81Kj">
  content
</div>

ä½œè€…ï¼šè¥¿æ¥¼å¬é›¨
é“¾æ¥ï¼šhttps://juejin.cn/post/6844903673517211655
æ¥æºï¼šæ˜é‡‘
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚
```

**ä»¥ä¸‹å†…å®¹å‚è€ƒ** [segmentï¼švueçš„scopedå’Œmoduleçš„åŒºåˆ«](https://segmentfault.com/a/1190000021084387)

å°†moduleçš„é‡Œé¢çš„æ ·å¼éƒ½ä¿å­˜åœ¨$styleå¯¹è±¡ä¸­ï¼Œæ¸²æŸ“åé€‰æ‹©å™¨ä¼šåŠ ä¸Šè¯¥ç»„ä»¶æ‰€åœ¨æ–‡ä»¶çš„æ–‡ä»¶åä½œä¸ºå‰ç¼€ï¼›ç”±äºæ˜¯ä¸ªå¯¹è±¡æ‰€ä»¥ä¹ŸåŒæ—¶èƒ½å°†æ ·å¼å¯¼å‡ºä¾›å…¶ä»–é¡µé¢ä½¿ç”¨ã€‚

```vue
<template>
  <div :class="$style.content">
    <div :class="$style['title-wrap']">æˆ‘æ˜¯çº¢è‰²çš„</div>
    <green-title></green-title>
  </div>
</template>
 
<style lang="scss" module>
.content {
  .title-wrap {
    font-size: 20px;
    color: red;
  }
}
</style>
```

![image.png](https://segmentfault.com/img/bVbAC4o)

ç»“è®ºï¼š æ ¹æ®æ¸²æŸ“å‰åå˜åŒ–å…¶å®ä¹Ÿæ˜¯å°±å½¢æˆä¸€ä¸ªç‰¹æ®Šçš„æ¨¡å—åŒ–çš„å‘½åæ–¹å¼ã€‚æ¥å½¢æˆå…¨å±€æ ·å¼ï¼Œåªæ˜¯ç”±äºåŠ ä¸Šé€‰æ‹©å™¨å‰ç¼€æ¯”è¾ƒæ˜¾å¾—è·Ÿç§æœ‰åŒ–äº›ï¼Œä¸€èˆ¬éš¾ä»¥é‡åè€Œå·²ã€‚

### æ€»ç»“

css moduleå‰æœŸè¿›è¡Œä¸éº»çƒ¦çš„é…ç½®ï¼Œå®ç°çš„æ•ˆæœæ¯”scoped cssæ›´ä¼˜ï¼Œè¿™é‡Œæ¨èä½¿ç”¨css moduleã€‚

# 2021å¹´4æœˆ18æ—¥-å¼•å…¥ç”¨æˆ·ä¸ªäººä¸­å¿ƒæ¨¡å—

[Vueä¿®æ”¹ç”¨æˆ·ä¿¡æ¯~ä¸è¦é”™è¿‡å“¦](https://blog.csdn.net/weixin_46370867/article/details/113448645)

å‚è€ƒä»¥ä¸Šæ–‡ç« ï¼Œè¯¥æ–‡ç« ä½¿ç”¨çš„æ˜¯ \<el-dialog>  ä¸è¿‡ä¸ºäº†é€‚åº”æœ¬é¡¹ç›®ï¼Œæˆ‘æƒ³æ”¹æˆ \<el-table> å§ï¼Œè¿™æ ·ä¼šæ›´å¥½çœ‹ç‚¹ï¼

å¦å¤–ï¼Œä»Šå¤©é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œå¾—è®°å½•ä¸‹ï¼

[npm run devå¡ä½ å³ vue-cli-service serveå¡ä½ï¼Œä¸æç¤ºé”™è¯¯ä¿¡æ¯ï¼Œè¿›ç¨‹ä¹Ÿä¸å…³é—­](https://blog.csdn.net/weixin_43711917/article/details/97970502)

é¦–å…ˆæ˜¯åœ¨åˆ›å»ºä¸€ä¸ª vue ç»„ä»¶åï¼Œä¸è¦ç›´æ¥åœ¨ \<template> ä¸‹å†™ä¸€äº›æ–‡æœ¬å†…å®¹å§ï¼Œè¿™æ ·ä¼šå¯¼è‡´ build çš„æ—¶å€™ç¼–è¯‘æ—¶å¡ä½ä¸åŠ¨ï¼Œæ²¡æŠ¥é”™ï¼Œä¹Ÿæ²¡æç¤ºï¼Œå°±æ˜¯ç¼–è¯‘æ—¶å¡ä½äº†ï¼Œè¯¦è§£å¯ä»¥å‚è€ƒä»¥ä¸Šé“¾æ¥ï¼

è€Œåœ¨å·²ç»è¿è¡Œå¥½çš„ä¸€ä¸ªç»„ä»¶ä¸‹ï¼Œç›´æ¥åœ¨ \<template> ä¸­æ·»åŠ æ–‡æœ¬å†…å®¹ï¼Œåˆ™ä¼šæŠ¥é”™ï¼š

<img src="https://raw.githubusercontent.com/ITISummer/FigureBed/master/img/Snipaste_2021-04-18_21-43-11.png" style="zoom: 80%;" />

<img src="https://raw.githubusercontent.com/ITISummer/FigureBed/master/img/Snipaste_2021-04-18_21-35-15.png" style="zoom:80%;" />

å¦å¤–ï¼Œä½¿ç”¨ vue æ—¶ï¼Œ\<style> é‡Œçš„æ ·å¼çœŸéš¾æ‰æ‘¸ï¼Œæˆ‘è§‰å¾—æ˜¯ä¸æ˜¯ build çš„ä¸€äº› bug ï¼Œæ˜æ˜ä¸€æ ·çš„æ ·å¼æ§åˆ¶ä»£ç ï¼Œæœ‰æ—¶å€™å»æ‰è·Ÿæ²¡å»æ‰æ ·å¼æ²¡å•¥å·®åˆ«ï¼Œæœ‰æ—¶å€™æŠŠç›´æ¥åœ¨æ ‡ç­¾é‡Œåœ¨ style å±æ€§é‡Œå†™çš„æ ·å¼ç…§æ¬åˆ° \<style> ä¸­ï¼Œå±…ç„¶åˆä¼šæœ‰å¾ˆå¤§çš„å·®åˆ«ï¼æ˜æ˜å·²ç»è¿è¡Œæ­£å¸¸çš„æ ·å¼ï¼Œåœ¨æŒç»­è¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå±…ç„¶åˆå˜äº†ï¼å“ï¼Œåæ­£çœŸå¿ƒç´¯å§ï¼çœŸçš„å¾ˆä¸æƒ³å¼„æ ·å¼ï¼



å¦å¤–ï¼Œè®°å½•ä¸‹ï¼Œåˆšæœ¬æ¥æƒ³æˆªå›¾ä¸Šä¼ åˆ° github å›¾åºŠçš„ï¼Œä½†æ˜¯ä½¿ç”¨ picgo ä¸€ç›´ä¸Šä¼ ä¸äº†ï¼Œåæ¥æœäº†ä¸‹åï¼Œå¿½ç„¶è®°èµ·ï¼Œæˆ‘æ”¹äº†æˆ‘çš„ GitHub ç”¨æˆ·åï¼Œæ‰€ä»¥ä¸€ç›´ä¸Šä¼ ä¸äº†ï¼å“ï¼Œæˆ‘è¿˜ä»¥ä¸º picgo å¯¹ GitHub è¿™ä¹ˆä¸å‹å¥½å‘¢ï¼[PicGoä¸Šä¼ å›¾ç‰‡åˆ°GitHubæ€»æ˜¯å¤±è´¥çš„ç‰¹æ®Šè§£å†³åŠæ³•](https://www.shopee6.com/web/web-tutorial/picgo-github-fail.html) å¥½äº†ï¼Œå‡ å¤©å°±è¿™æ ·äº†å§ï¼æˆ‘å·¦æ‰‹è‡‚é…¸ç–¼ï¼Œä¸æƒ³å¼„äº†ï¼



## vue ç»„ä»¶é—´é€šä¿¡çš„å…­ç§æ–¹å¼

å‚è€ƒæ¥æºï¼š[segmentï¼švueç»„ä»¶é—´é€šä¿¡å…­ç§æ–¹å¼ï¼ˆå®Œæ•´ç‰ˆï¼‰](https://segmentfault.com/a/1190000019208626)

![img](https://upload-images.jianshu.io/upload_images/3174701-7a15ec352b4e7d84?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

A å’Œ Bã€B å’Œ Cã€B å’Œ D éƒ½æ˜¯çˆ¶å­å…³ç³»ï¼ŒC å’Œ D æ˜¯å…„å¼Ÿå…³ç³»ï¼ŒA å’Œ C æ˜¯éš”ä»£å…³ç³»ï¼ˆå¯èƒ½éš”å¤šä»£ï¼‰

### æ–¹æ³•ä¸€ã€`props`/`$emit`

çˆ¶ç»„ä»¶Aé€šè¿‡propsçš„æ–¹å¼å‘å­ç»„ä»¶Bä¼ é€’ï¼ŒB to A é€šè¿‡åœ¨ B ç»„ä»¶ä¸­ $emit, A ç»„ä»¶ä¸­ v-on çš„æ–¹å¼å®ç°ã€‚

#### 1.çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼

çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’ `users:["Henry","Bucky","Emily"]`

```vue
//App.vueçˆ¶ç»„ä»¶
<template>
  <div id="app">
    <users v-bind:users="users"></users>//å‰è€…è‡ªå®šä¹‰åç§°ä¾¿äºå­ç»„ä»¶è°ƒç”¨ï¼Œåè€…è¦ä¼ é€’æ•°æ®å
  </div>
</template>
<script>
import Users from "./components/Users"
export default {
  name: 'App',
  data(){
    return{
      users:["Henry","Bucky","Emily"]
    }
  },
  components:{
    "users":Users
  }
}
```

```vue
//userså­ç»„ä»¶
<template>
  <div class="hello">
    <ul>
      <li v-for="user in users">{{user}}</li>//éå†ä¼ é€’è¿‡æ¥çš„å€¼ï¼Œç„¶åå‘ˆç°åˆ°é¡µé¢
    </ul>
  </div>
</template>
<script>
export default {
  name: 'HelloWorld',
  props:{
    users:{           //è¿™ä¸ªå°±æ˜¯çˆ¶ç»„ä»¶ä¸­å­æ ‡ç­¾è‡ªå®šä¹‰åå­—
      type:Array,
      required:true
    }
  }
}
</script>
```

**æ€»ç»“ï¼šçˆ¶ç»„ä»¶é€šè¿‡propså‘ä¸‹ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶ã€‚æ³¨ï¼šç»„ä»¶ä¸­çš„æ•°æ®å…±æœ‰ä¸‰ç§å½¢å¼ï¼šdataã€propsã€computed**

#### 2.å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼ï¼ˆé€šè¿‡åˆ†å‘äº‹ä»¶å½¢å¼ (this.$emit()ï¼‰

![img](https://upload-images.jianshu.io/upload_images/3174701-8d31dfc061d39fad?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

```vue
// å­ç»„ä»¶
<template>
  <header>
    <h1 @click="changeTitle">{{title}}</h1>//ç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶
  </header>
</template>
<script>
export default {
  name: 'app-header',
  data() {
    return {
      title:"Vue.js Demo"
    }
  },
  methods:{
    changeTitle() {
      this.$emit("titleChanged","å­å‘çˆ¶ç»„ä»¶ä¼ å€¼");//è‡ªå®šä¹‰äº‹ä»¶  ä¼ é€’å€¼â€œå­å‘çˆ¶ç»„ä»¶ä¼ å€¼â€
    }
  }
}
</script>
```

```vue
// çˆ¶ç»„ä»¶
<template>
  <div id="app">
    <app-header v-on:titleChanged="updateTitle" ></app-header>//ä¸å­ç»„ä»¶titleChangedè‡ªå®šä¹‰äº‹ä»¶ä¿æŒä¸€è‡´
   // updateTitle($event)æ¥å—ä¼ é€’è¿‡æ¥çš„æ–‡å­—
    <h2>{{title}}</h2>
  </div>
</template>
<script>
import Header from "./components/Header"
export default {
  name: 'App',
  data(){
    return{
      title:"ä¼ é€’çš„æ˜¯ä¸€ä¸ªå€¼"
    }
  },
  methods:{
    updateTitle(e){   //å£°æ˜è¿™ä¸ªå‡½æ•°
      this.title = e;
    }
  },
  components:{
   "app-header":Header,
  }
}
</script>
```

**æ€»ç»“ï¼šå­ç»„ä»¶é€šè¿‡eventsç»™çˆ¶ç»„ä»¶å‘é€æ¶ˆæ¯ï¼Œå®é™…ä¸Šå°±æ˜¯å­ç»„ä»¶æŠŠè‡ªå·±çš„æ•°æ®å‘é€åˆ°çˆ¶ç»„ä»¶ã€‚**

### æ–¹æ³•äºŒã€`$emit`/`$on`

**è¿™ç§æ–¹æ³•é€šè¿‡ä¸€ä¸ªç©ºçš„Vueå®ä¾‹ä½œä¸ºä¸­å¤®äº‹ä»¶æ€»çº¿ï¼ˆäº‹ä»¶ä¸­å¿ƒï¼‰ï¼Œç”¨å®ƒæ¥è§¦å‘äº‹ä»¶å’Œç›‘å¬äº‹ä»¶,å·§å¦™è€Œè½»é‡åœ°å®ç°äº†ä»»ä½•ç»„ä»¶é—´çš„é€šä¿¡ï¼ŒåŒ…æ‹¬çˆ¶å­ã€å…„å¼Ÿã€è·¨çº§**ã€‚å½“æˆ‘ä»¬çš„é¡¹ç›®æ¯”è¾ƒå¤§æ—¶ï¼Œå¯ä»¥é€‰æ‹©æ›´å¥½çš„çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆvuexã€‚

```vue
    var Event=new Vue();
    Event.$emit(äº‹ä»¶å,æ•°æ®);
    Event.$on(äº‹ä»¶å,data => {});
```



### æ–¹æ³•ä¸‰ã€vuex

![img](https://upload-images.jianshu.io/upload_images/3174701-e62ba449a0c2e7ac?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

#### 1.ç®€è¦ä»‹ç»VuexåŸç†

Vuexå®ç°äº†ä¸€ä¸ª**å•å‘æ•°æ®æµ**ï¼Œ**åœ¨å…¨å±€æ‹¥æœ‰ä¸€ä¸ªStateå­˜æ”¾æ•°æ®**ï¼Œå½“ç»„ä»¶è¦æ›´æ”¹Stateä¸­çš„æ•°æ®æ—¶ï¼Œå¿…é¡»é€šè¿‡Mutationè¿›è¡Œï¼ŒMutationåŒæ—¶æä¾›äº†è®¢é˜…è€…æ¨¡å¼ä¾›å¤–éƒ¨æ’ä»¶è°ƒç”¨è·å–Stateæ•°æ®çš„æ›´æ–°ã€‚è€Œå½“æ‰€æœ‰å¼‚æ­¥æ“ä½œ(å¸¸è§äºè°ƒç”¨åç«¯æ¥å£å¼‚æ­¥è·å–æ›´æ–°æ•°æ®)æˆ–æ‰¹é‡çš„åŒæ­¥æ“ä½œéœ€è¦èµ°Actionï¼Œä½†Actionä¹Ÿæ˜¯æ— æ³•ç›´æ¥ä¿®æ”¹Stateçš„ï¼Œè¿˜æ˜¯éœ€è¦é€šè¿‡Mutationæ¥ä¿®æ”¹Stateçš„æ•°æ®ã€‚æœ€åï¼Œæ ¹æ®Stateçš„å˜åŒ–ï¼Œæ¸²æŸ“åˆ°è§†å›¾ä¸Šã€‚

#### 2.ç®€è¦ä»‹ç»å„æ¨¡å—åœ¨æµç¨‹ä¸­çš„åŠŸèƒ½ï¼š

- Vue Componentsï¼šVueç»„ä»¶ã€‚HTMLé¡µé¢ä¸Šï¼Œè´Ÿè´£æ¥æ”¶ç”¨æˆ·æ“ä½œç­‰äº¤äº’è¡Œä¸ºï¼Œ**æ‰§è¡Œdispatchæ–¹æ³•è§¦å‘å¯¹åº”actionè¿›è¡Œå›åº”**ã€‚
- dispatchï¼šæ“ä½œè¡Œä¸ºè§¦å‘æ–¹æ³•ï¼Œæ˜¯å”¯ä¸€èƒ½æ‰§è¡Œactionçš„æ–¹æ³•ã€‚
- actionsï¼š**æ“ä½œè¡Œä¸ºå¤„ç†æ¨¡å—,ç”±ç»„ä»¶ä¸­çš„`$store.dispatch('action åç§°', data1)`æ¥è§¦å‘ã€‚ç„¶åç”±commit()æ¥è§¦å‘mutationçš„è°ƒç”¨ , é—´æ¥æ›´æ–° state**ã€‚è´Ÿè´£å¤„ç†Vue Componentsæ¥æ”¶åˆ°çš„æ‰€æœ‰äº¤äº’è¡Œä¸ºã€‚åŒ…å«åŒæ­¥/å¼‚æ­¥æ“ä½œï¼Œæ”¯æŒå¤šä¸ªåŒåæ–¹æ³•ï¼ŒæŒ‰ç…§æ³¨å†Œçš„é¡ºåºä¾æ¬¡è§¦å‘ã€‚å‘åå°APIè¯·æ±‚çš„æ“ä½œå°±åœ¨è¿™ä¸ªæ¨¡å—ä¸­è¿›è¡Œï¼ŒåŒ…æ‹¬è§¦å‘å…¶ä»–actionä»¥åŠæäº¤mutationçš„æ“ä½œã€‚è¯¥æ¨¡å—æä¾›äº†Promiseçš„å°è£…ï¼Œä»¥æ”¯æŒactionçš„é“¾å¼è§¦å‘ã€‚
- commitï¼šçŠ¶æ€æ”¹å˜æäº¤æ“ä½œæ–¹æ³•ã€‚å¯¹mutationè¿›è¡Œæäº¤ï¼Œ**æ˜¯å”¯ä¸€èƒ½æ‰§è¡Œmutationçš„æ–¹æ³•**ã€‚
- mutationsï¼š**çŠ¶æ€æ”¹å˜æ“ä½œæ–¹æ³•ï¼Œç”±actionsä¸­çš„`commit('mutation åç§°')`æ¥è§¦å‘**ã€‚**æ˜¯Vuexä¿®æ”¹stateçš„å”¯ä¸€æ¨èæ–¹æ³•**ã€‚è¯¥æ–¹æ³•åªèƒ½è¿›è¡ŒåŒæ­¥æ“ä½œï¼Œä¸”æ–¹æ³•ååªèƒ½å…¨å±€å”¯ä¸€ã€‚æ“ä½œä¹‹ä¸­ä¼šæœ‰ä¸€äº›hookæš´éœ²å‡ºæ¥ï¼Œä»¥è¿›è¡Œstateçš„ç›‘æ§ç­‰ã€‚
- stateï¼šé¡µé¢çŠ¶æ€ç®¡ç†å®¹å™¨å¯¹è±¡ã€‚é›†ä¸­å­˜å‚¨Vue componentsä¸­dataå¯¹è±¡çš„é›¶æ•£æ•°æ®ï¼Œå…¨å±€å”¯ä¸€ï¼Œä»¥è¿›è¡Œç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†ã€‚**é¡µé¢æ˜¾ç¤ºæ‰€éœ€çš„æ•°æ®ä»è¯¥å¯¹è±¡ä¸­è¿›è¡Œè¯»å–**ï¼Œåˆ©ç”¨Vueçš„ç»†ç²’åº¦æ•°æ®å“åº”æœºåˆ¶æ¥è¿›è¡Œé«˜æ•ˆçš„çŠ¶æ€æ›´æ–°ã€‚
- gettersï¼šstateå¯¹è±¡è¯»å–æ–¹æ³•ã€‚å›¾ä¸­æ²¡æœ‰å•ç‹¬åˆ—å‡ºè¯¥æ¨¡å—ï¼Œåº”è¯¥è¢«åŒ…å«åœ¨äº†renderä¸­ï¼ŒVue Componentsé€šè¿‡è¯¥æ–¹æ³•è¯»å–å…¨å±€stateå¯¹è±¡ã€‚

#### 3.Vuexä¸localStorage

vuex æ˜¯ vue çš„çŠ¶æ€ç®¡ç†å™¨ï¼Œå­˜å‚¨çš„æ•°æ®æ˜¯å“åº”å¼çš„ã€‚ä½†æ˜¯å¹¶ä¸ä¼šä¿å­˜èµ·æ¥ï¼Œåˆ·æ–°ä¹‹åå°±å›åˆ°äº†åˆå§‹çŠ¶æ€ï¼Œ**å…·ä½“åšæ³•åº”è¯¥åœ¨vuexé‡Œæ•°æ®æ”¹å˜çš„æ—¶å€™æŠŠæ•°æ®æ‹·è´ä¸€ä»½ä¿å­˜åˆ°localStorageé‡Œé¢ï¼Œåˆ·æ–°ä¹‹åï¼Œå¦‚æœlocalStorageé‡Œæœ‰ä¿å­˜çš„æ•°æ®ï¼Œå–å‡ºæ¥å†æ›¿æ¢storeé‡Œçš„stateã€‚**

```vue
<script>
let defaultCity = "ä¸Šæµ·"
try {   // ç”¨æˆ·å…³é—­äº†æœ¬åœ°å­˜å‚¨åŠŸèƒ½ï¼Œæ­¤æ—¶åœ¨å¤–å±‚åŠ ä¸ªtry...catch
  if (!defaultCity){
    defaultCity = JSON.parse(window.localStorage.getItem('defaultCity'))
  }
}catch(e){}
export default new Vuex.Store({
  state: {
    city: defaultCity
  },
  mutations: {
    changeCity(state, city) {
      state.city = city
      try {
      window.localStorage.setItem('defaultCity', JSON.stringify(state.city));
      // æ•°æ®æ”¹å˜çš„æ—¶å€™æŠŠæ•°æ®æ‹·è´ä¸€ä»½ä¿å­˜åˆ°localStorageé‡Œé¢
      } catch (e) {}
    }
  }
})    
</script>
```

è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šç”±äºvuexé‡Œï¼Œæˆ‘ä»¬ä¿å­˜çš„çŠ¶æ€ï¼Œéƒ½æ˜¯æ•°ç»„ï¼Œè€ŒlocalStorageåªæ”¯æŒå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥éœ€è¦ç”¨JSONè½¬æ¢ï¼š

```vue
<script>
JSON.stringify(state.subscribeList);   // array -> string
JSON.parse(window.localStorage.getItem("subscribeList"));    // string -> array    
</script>
```

### æ–¹æ³•å››ã€`$attrs`/`$listeners`

#### 1.ç®€ä»‹

å¤šçº§ç»„ä»¶åµŒå¥—éœ€è¦ä¼ é€’æ•°æ®æ—¶ï¼Œé€šå¸¸ä½¿ç”¨çš„æ–¹æ³•æ˜¯é€šè¿‡vuexã€‚ä½†å¦‚æœä»…ä»…æ˜¯ä¼ é€’æ•°æ®ï¼Œè€Œä¸åšä¸­é—´å¤„ç†ï¼Œä½¿ç”¨ vuex å¤„ç†ï¼Œæœªå…å°±æœ‰ç‚¹å¤§æå°ç”¨ã€‚ä¸ºæ­¤Vue2.4 ç‰ˆæœ¬æä¾›äº†å¦ä¸€ç§æ–¹æ³•----`$attrs`/`$listeners`

- `$attrs`ï¼šåŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­ä¸è¢« prop æ‰€è¯†åˆ« (ä¸”è·å–) çš„ç‰¹æ€§ç»‘å®š (class å’Œ style é™¤å¤–)ã€‚å½“ä¸€ä¸ªç»„ä»¶æ²¡æœ‰å£°æ˜ä»»ä½• prop æ—¶ï¼Œè¿™é‡Œä¼šåŒ…å«æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„ç»‘å®š (class å’Œ style é™¤å¤–)ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ v-bind="$attrs" ä¼ å…¥å†…éƒ¨ç»„ä»¶ã€‚é€šå¸¸é…åˆ interitAttrs é€‰é¡¹ä¸€èµ·ä½¿ç”¨ã€‚
- `$listeners`ï¼šåŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­çš„ (ä¸å« .native ä¿®é¥°å™¨çš„) v-on äº‹ä»¶ç›‘å¬å™¨ã€‚å®ƒå¯ä»¥é€šè¿‡ v-on="$listeners" ä¼ å…¥å†…éƒ¨ç»„ä»¶

<img src="https://upload-images.jianshu.io/upload_images/3174701-db162929eb89cb7f?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img" style="zoom:80%;" />

å¦‚ä¸Šå›¾æ‰€ç¤º`$attrs`è¡¨ç¤ºæ²¡æœ‰ç»§æ‰¿æ•°æ®çš„å¯¹è±¡ï¼Œæ ¼å¼ä¸º{å±æ€§åï¼šå±æ€§å€¼}ã€‚Vue2.4æä¾›äº†`$attrs` , `$listeners` æ¥ä¼ é€’æ•°æ®ä¸äº‹ä»¶ï¼Œè·¨çº§ç»„ä»¶ä¹‹é—´çš„é€šè®¯å˜å¾—æ›´ç®€å•ã€‚ç®€å•æ¥è¯´ï¼š`$attrs`ä¸`$listeners` æ˜¯ä¸¤ä¸ªå¯¹è±¡ï¼Œ`$attrs` é‡Œå­˜æ”¾çš„æ˜¯çˆ¶ç»„ä»¶ä¸­ç»‘å®šçš„é Props å±æ€§ï¼Œ`$listeners`é‡Œå­˜æ”¾çš„æ˜¯çˆ¶ç»„ä»¶ä¸­ç»‘å®šçš„éåŸç”Ÿäº‹ä»¶ã€‚

### æ–¹æ³•äº”ã€provide/inject

#### 1.ç®€ä»‹

Vue2.2.0æ–°å¢API,è¿™å¯¹é€‰é¡¹éœ€è¦ä¸€èµ·ä½¿ç”¨ï¼Œ**ä»¥å…è®¸ä¸€ä¸ªç¥–å…ˆç»„ä»¶å‘å…¶æ‰€æœ‰å­å­™åä»£æ³¨å…¥ä¸€ä¸ªä¾èµ–ï¼Œä¸è®ºç»„ä»¶å±‚æ¬¡æœ‰å¤šæ·±ï¼Œå¹¶åœ¨èµ·ä¸Šä¸‹æ¸¸å…³ç³»æˆç«‹çš„æ—¶é—´é‡Œå§‹ç»ˆç”Ÿæ•ˆ**ã€‚ä¸€è¨€è€Œè”½ä¹‹ï¼šç¥–å…ˆç»„ä»¶ä¸­é€šè¿‡provideræ¥æä¾›å˜é‡ï¼Œç„¶ååœ¨å­å­™ç»„ä»¶ä¸­é€šè¿‡injectæ¥æ³¨å…¥å˜é‡ã€‚
**provide / inject API ä¸»è¦è§£å†³äº†è·¨çº§ç»„ä»¶é—´çš„é€šä¿¡é—®é¢˜ï¼Œä¸è¿‡å®ƒçš„ä½¿ç”¨åœºæ™¯ï¼Œä¸»è¦æ˜¯å­ç»„ä»¶è·å–ä¸Šçº§ç»„ä»¶çš„çŠ¶æ€ï¼Œè·¨çº§ç»„ä»¶é—´å»ºç«‹äº†ä¸€ç§ä¸»åŠ¨æä¾›ä¸ä¾èµ–æ³¨å…¥çš„å…³ç³»**ã€‚

### æ–¹æ³•å…­ã€`$parent` / `$children`ä¸ `ref`

- `ref`ï¼šå¦‚æœåœ¨æ™®é€šçš„ DOM å…ƒç´ ä¸Šä½¿ç”¨ï¼Œå¼•ç”¨æŒ‡å‘çš„å°±æ˜¯ DOM å…ƒç´ ï¼›å¦‚æœç”¨åœ¨å­ç»„ä»¶ä¸Šï¼Œå¼•ç”¨å°±æŒ‡å‘ç»„ä»¶å®ä¾‹
- `$parent` / `$children`ï¼šè®¿é—®çˆ¶ / å­å®ä¾‹

éœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™ä¸¤ç§éƒ½æ˜¯ç›´æ¥å¾—åˆ°ç»„ä»¶å®ä¾‹ï¼Œä½¿ç”¨åå¯ä»¥ç›´æ¥è°ƒç”¨ç»„ä»¶çš„æ–¹æ³•æˆ–è®¿é—®æ•°æ®ã€‚

### æ€»ç»“

å¸¸è§ä½¿ç”¨åœºæ™¯å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š

- çˆ¶å­é€šä¿¡ï¼š

çˆ¶å‘å­ä¼ é€’æ•°æ®æ˜¯é€šè¿‡ propsï¼Œå­å‘çˆ¶æ˜¯é€šè¿‡ eventsï¼ˆ`$emit`ï¼‰ï¼›é€šè¿‡çˆ¶é“¾ / å­é“¾ä¹Ÿå¯ä»¥é€šä¿¡ï¼ˆ`$parent` / `$children`ï¼‰ï¼›ref ä¹Ÿå¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ï¼›provide / inject APIï¼›`$attrs/$listeners`

- å…„å¼Ÿé€šä¿¡ï¼š

Busï¼›Vuex

- è·¨çº§é€šä¿¡ï¼š

Busï¼›Vuexï¼›provide / inject APIã€`$attrs/$listeners`

